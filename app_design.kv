WindowManager:
    LoginScreen:
    ApplicationFormWindow:
    EditFormItemWindow:
    AdminDash:
    ApplyCadetScreen:
    AdminProfile:
    CadetsInfoScreen:
    CadetDash:
    NoticeScreen:
    AboutScreen:
    SettingsScreen:

#: import utils kivy.utils

<LoginScreen>:
    name: "LoginScreen"

    MDNavigationLayout:
        ScreenManager:
            Screen:
                BoxLayout:
                    orientation: "vertical"

                    MDToolbar:
                        title: "RC BNCC"
                        elevation: sp(7)

                        Image:
                            source: "Bncc_logo.png"
                            pos: (((self.parent.size[0])/1.5)-20,self.pos[1])

                    Widget:

    MDLabel:
        id: login_label
        text: "Cadet Login"
        pos_hint: {"center_x":0.78,"center_y":0.76}
        font_style: "H5"

    BoxLayout:
        orientation: 'vertical'
        pos_hint: {"center_x":0.5,"center_y":0.2}

        GridLayout:
            cols: 1
            rows: 4
            size_hint_x: None
            width: "220sp"
            pos_hint: {"center_x":0.5,"center_y":0.5}
            spacing : "8sp"

            MDTextField:
                id: username_textfield
                hint_text: "Type Username or Email"
                helper_text: "or click forgot account"
                helper_text_mode: "on_focus"
                icon_right: "account"
                icon_right_color: "white" if app.theme_cls.theme_style == "Dark" else "black"
                text_color: "white" if app.theme_cls.theme_style == "Dark" else "black"

            MDTextField:
                id: password_textfield
                hint_text: "Type Password"
                helper_text: "or click forgot account"
                helper_text_mode: "on_focus"
                icon_right: "key"
                icon_right_color: "white" if app.theme_cls.theme_style == "Dark" else "black"
                text_color: "white" if app.theme_cls.theme_style == "Dark" else "black"

            GridLayout:
                cols: 2
                rows: 1
                spacing: "20sp"

                MDRectangleFlatButton:
                    id: log_in
                    text: "Log In"
                    on_release:
                        root.log_in_btn()

                MDRectangleFlatButton:
                    text: "Forgot Password"

    MDRaisedButton:
        id: change_user
        text: "Go to Admin Login"
        pos_hint: {"center_x":0.48,"center_y":0.26}
        font_style: "Caption"
        on_release:
            username_textfield.text = ''
            password_textfield.text = ''
            if change_user.text == "Go to Admin Login": \
            login_label.text = "Admin Login"; \
            change_user.text = "Go to Cadet Login";
            else: \
            login_label.text = "Cadet Login"; \
            change_user.text = "Go to Admin Login";

    MDLabel:
        text: "OR"
        pos_hint: {"center_x":0.95,"center_y":0.18}
        font_style: "Caption"

    MDRectangleFlatButton:
        id: apply_btn
        text: "Apply to be Cadet"
        text_color: utils.get_color_from_hex("#4298f5")
        line_width: .1
        pos_hint: {"center_x":0.48,"center_y":0.12}
        font_style: "Subtitle1"
        on_release:
            root.manager.get_screen("ApplyCadetScreen").create_form()
            root.manager.current = "ApplyCadetScreen"



<AdminDash>:
    name: "AdminDash"

    MDGridLayout:
        cols: 1
        rows: 4
        spacing: 40
        padding: 20
        pos: (root.width//2 - (self.width//2 - sp(60)), root.height//2 - self.height+sp(90))
        MDRaisedButton:
            text: "Applicants Information"
            md_bg_color: utils.get_color_from_hex("#3067ddff")
            on_release:

        MDRaisedButton:
            text: "Application Form"
            md_bg_color: utils.get_color_from_hex("#3067ddff")
            on_release:
                root.manager.get_screen("ApplicationFormWindow").show_form()
                root.manager.current = "ApplicationFormWindow"


        MDRaisedButton:
            text: "Post-Selection Criteria"
            md_bg_color: utils.get_color_from_hex("#3067ddff")
            on_release:

        MDRaisedButton:
            text: "Create Notice"
            md_bg_color: utils.get_color_from_hex("#3067ddff")
            on_release:

    MDNavigationLayout:
        ScreenManager:
            Screen:
                BoxLayout:
                    orientation: "vertical"
                    MDToolbar:
                        title: "RC BNCC"
                        elevation: sp(8)
                        left_action_items: [["menu", lambda x : nav_drawer.set_state("toggle")]]

                        Image:
                            source: "Bncc_logo.png"
                            pos: (((self.parent.size[0])/1.5)-20,self.pos[1])


                    Widget:

    MDNavigationDrawer:
        id: nav_drawer
        size_hint_x: None
        width: root.width * (3/4)

        BoxLayout:
            orientation: "vertical"
            padding: 30, 60
            spacing : 20

            MDLabel:
                text: "Admin Dash"
                size_hint_y: None
                height: self.texture_size[1]
                padding: (80,20)

            ScrollView:
                MDList:
                    OneLineListItem:
                        text: "Profile"
                        on_release:
                            root.manager.current = "AdminProfile"

                    OneLineListItem:
                        text: "Cadets Info"
                        on_release:
                            root.manager.current = "CadetsInfoScreen"

                    OneLineListItem:
                        text: "Notice Board"
                        on_release:
                            root.manager.current = "NoticeScreen"

                    OneLineListItem:
                        text: "About"
                        on_release:
                            root.manager.current = "AboutScreen"

                    OneLineListItem:
                        text: "Settings"
                        on_release:
                            root.manager.current = "SettingsScreen"

                    OneLineListItem:
                        text: "Log Out"
                        on_release:
                            root.manager.current = "LoginScreen"
                            root.manager.get_screen("AdminDash").ids.nav_drawer.status = 'closed'

<CadetDash>:
    name: "CadetDash"


<ApplyCadetScreen>:
    name: "ApplyCadetScreen"

    MDBoxLayout:
        size_hint_y: None
        height: root.height - sp(60)

        ScrollView:
            MDList:
                MDGridLayout:

                    id: application_form
                    cols: 2
                    size_hint: None, None
                    size: ((root.width - sp(30)),self.minimum_height)
                    pos_hint_y: 1
                    spacing: 30
                    padding: 18

                MDGridLayout:
                    cols: 2
                    rows: 1
                    size_hint: None, None
                    size: ((root.width - sp(30)),self.minimum_height)
                    padding: 150, 20, 150, 20
                    spacing : 30
                    MDRectangleFlatButton:
                        text: "Apply"
                    MDRectangleFlatButton:
                        text: "Go Back"
                        on_release:
                            root.manager.current = "LoginScreen"
                            application_form.clear_widgets()

    MDNavigationLayout:
        ScreenManager:
            Screen:
                BoxLayout:
                    orientation: "vertical"
                    MDToolbar:
                        title: "RC BNCC"
                        elevation: sp(8)

                        Image:
                            source: "Bncc_logo.png"
                            pos: (((self.parent.size[0])/1.5)-20,self.pos[1])
                    Widget:

<AdminProfile>:
    name: "AdminProfile"

<CadetsInfoScreen>:
    name: "CadetsInfoScreen"

<NoticeScreen>:
    name: "NoticeScreen"

<AboutScreen>:
    name: "AboutScreen"
    MDLabel:
        text: "Made by Saad Ibne Sohael"
        pos_hint: {"center_x":0.5,"center_y":0.5}

<SettingsScreen>:
    name: "SettingsScreen"

    MDBoxLayout:

        ScrollView:
            MDList:

                OneLineListItem:
                    id: theme_changer
                    text: f"Current theme : {app.theme_cls.theme_style}"
                    color: "white" if app.theme_cls.theme_style == "Dark" else "black"
                    on_press:
                        root.change_theme()
                        app.update_theme()
                        theme_changer.text = f"Current theme : {app.theme_cls.theme_style}"


                    MDToolbar:
                        text: "Theme Style"
                        right_action_items: [["theme-light-dark"]]
                        theme_text_color: "Custom"
                        md_bg_color: [1,0,0,0]

<ApplicationFormWindow>:
    name: "ApplicationFormWindow"

    MDBoxLayout:

        pos_hint: {'center_x':0.48}
        orientation: 'vertical'
        padding: 50

        ScrollView:
            size_hint_y : 0.9

            MDList:
                MDGridLayout:
                    id: edit_application_form
                    cols: 1
                    size_hint: None, None
                    size: ((root.width - sp(30)),self.minimum_height)
                    pos_hint_y: 1
                    spacing: 60
                    padding: 18

        MDGridLayout:
            cols: 2
            rows: 1
            size_hint_y : 0.1
            padding: 10,10
            spacing : 30

            MDRectangleFlatButton:
                text: "Add or Edit Items"
                on_release:
                    print(root.manager.get_screen("EditFormItemWindow").form_items_names)
                    root.manager.get_screen("EditFormItemWindow").ids.drop_item.text = root.manager.get_screen("EditFormItemWindow").form_items_names[0]
                    root.manager.current = 'EditFormItemWindow'

            MDRectangleFlatButton:
                text: "Remove Items"
                on_release:
                    root.manager.get_screen('EditFormItemWindow').ids.add_toggle_btn.disabled = True
                    root.manager.get_screen('EditFormItemWindow').ids.edit_toggle_btn.disabled = True
                    root.manager.get_screen('EditFormItemWindow').ids.item_place_label.text = 'Select Item'
                    root.manager.get_screen('EditFormItemWindow').ids.item_name_input.disabled = True
                    root.manager.get_screen('EditFormItemWindow').ids.add_or_edit_btn.text = "Remove Item"
                    root.manager.current = 'EditFormItemWindow'

<EditFormItemWindow>:
    name: "EditFormItemWindow"

    MDBoxLayout:
        size_hint_y: None
        height: root.height - sp(200)
        orientation: "vertical"

        GridLayout:
            size_hint: None, None
            size: ((root.width - sp(30)),self.minimum_height)
            cols: 2
            rows: 3
            padding: 15
            spacing : 40
            pos_hint: {'center_y': 0.8}

            MDLabel:
                id: item_name_label
                text: 'Item Name : '
                size_hint_x: None
                width: sp(100)

            MDTextField:
                id: item_name_input
                hint_text: 'type item name...'
                size_hint_x: None
                width: sp(100)

            MDLabel:
                id: item_place_label
                text: 'Place at : '
                size_hint_x: 0.5

            MDDropDownItem:
                id: drop_item
                #text: root.form_items_names[0]
                size_hint_x: 0.5
                on_release:
                    root.item_dropdown_()

            MDRaisedButton:
                id: add_or_edit_btn
                text: "Edit Item" if edit_toggle_btn.state == 'down' else "Add Item To Form"
                on_release:
                    root.do_stuffs()

        Widget:

    MDNavigationLayout:
        ScreenManager:
            Screen:
                BoxLayout:
                    orientation: "vertical"
                    MDToolbar:
                        title: "RC BNCC"
                        elevation: sp(8)

                        Image:
                            source: "Bncc_logo.png"
                            pos: (((self.parent.size[0])/1.5)-20,self.pos[1])
                    Widget:

    GridLayout:

        cols: 2
        rows: 1
        size_hint: None, 0.1
        width: sp(250)
        pos_hint:{'center_x':0.5,'center_y':0.8}
        spacing: 50
        background_normal: ' '

        ToggleButton:
            id: add_toggle_btn
            text: "ADD ITEMS"
	        background_normal: ''
	        background_color: utils.get_color_from_hex("##6ab83a")
	        disabled: True if edit_toggle_btn.state == 'down' else False
	        on_release:
	            root.change_texts()


        ToggleButton:
            id: edit_toggle_btn
            text: "EDIT ITEMS"
	        background_normal: ''
	        background_color: utils.get_color_from_hex("##6ab83a")
	        disabled: True if add_toggle_btn.state == 'down' else False
            on_release:
                root.change_texts()

